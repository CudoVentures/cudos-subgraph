specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: ServiceProvider
    network: rinkeby
    source:
      address: '0xb4382A344aDdd0c7DacA584f8cABFE16c3ABeB12'
      abi: StakingRewards
      startBlock: 8819361
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      file: ./src/staking-rewards-mapping.ts
      entities:
        - Directory
      abis:
        - name: StakingRewards
          file: ./abis/StakingRewards.json
      eventHandlers:
        - event: ServiceProviderWhitelisted(indexed address,indexed address)
          handler: handleNewServiceProviderWhitelisted
        - event: MinServiceProviderFeeUpdated(uint256,uint256)
          handler: handleMinServiceProviderFeeUpdated
        - event: MinRequiredStakingAmountForServiceProvidersUpdated(uint256,uint256)
          handler: handleMinRequiredStakingAmountForServiceProvidersUpdated
        - event: MaxStakingAmountForServiceProvidersUpdated(uint256,uint256)
          handler: handleMaxStakingAmountForServiceProvidersUpdated
templates:
  - name: ServiceProvider
    kind: ethereum/contract
    network: rinkeby
    source:
      abi: ServiceProvider
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      file: ./src/service-provider-mapping.ts
      entities:
        - AddDelegatedStake
        - StakedServiceProviderBond
        - WithdrawDelegatedStakeRequested
        - WithdrewDelegatedStake
      abis:
        - name: ServiceProvider
          file: ./abis/ServiceProvider.json
      eventHandlers:
        - event: StakedServiceProviderBond(indexed address,indexed address,indexed uint256,uint256)
          handler: handleServiceProviderStakedBond
        - event: AddDelegatedStake(indexed address,indexed uint256,uint256)
          handler: handleStakeDelegatedToServiceProvider
        - event: WithdrawDelegatedStakeRequested(indexed address,indexed uint256,uint256)
          handler: handleDelegatedStakeWithdrawalRequested
        - event: WithdrewDelegatedStake(indexed address,indexed uint256,uint256)
          handler: handleDelegatedStakeWithdrawn
        - event: IncreasedServiceProviderBond(indexed address,indexed uint256,uint256,uint256)
          handler: handleIncreasedServiceProviderBond
        - event: DecreasedServiceProviderBond(indexed address,indexed uint256,uint256,uint256)
          handler: handleDecreasedServiceProviderBond
        - event: WithdrewServiceProviderStake(indexed address,indexed uint256,uint256)
          handler: handleWithdrewServiceProviderStake
        - event: ExitedServiceProviderBond(indexed address,indexed uint256)
          handler: handleExitedServiceProviderBond
        - event: ExitDelegatedStake(indexed address,indexed uint256)
          handler: handleExitDelegatedStake
