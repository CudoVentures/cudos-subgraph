specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
#  - kind: ethereum/contract
#    name: VestingContract
#    network: mainnet
#    source:
#      address: "0xb3ccb8FB2533E51893915908CEb85763CeaeA97b"
#      abi: VestingContract
#      startBlock: 11633453
#    mapping:
#      kind: ethereum/events
#      apiVersion: 0.0.3
#      language: wasm/assemblyscript
#      entities:
#        - VestingDrawDown
#        - VestingBeneficiary
#      abis:
#        - name: VestingContract
#          file: ./abis/VestingContract.json
#      eventHandlers:
#        - event: DrawDown(indexed address,indexed uint256,indexed uint256)
#          handler: handleDrawDown
#        - event: ScheduleCreated(indexed address,indexed uint256,indexed uint256,uint256)
#          handler: handleScheduleCreated
#      file: ./src/vesting-mapping.ts
#  - kind: ethereum/contract
#    name: ServiceProvider
#    network: rinkeby
#    source:
#      address: "0x9ff72b92a2A310Ee089A7901a6E2A59E162728c0"
#      abi: ServiceProvider
#      startBlock: 8647752
#    mapping:
#      kind: ethereum/events
#      apiVersion: 0.0.3
#      language: wasm/assemblyscript
#      entities:
#        - AddDelegatedStake
#        - StakedServiceProviderBond
#        - WithdrawDelegatedStakeRequested
#        - WithdrewDelegatedStake
#      abis:
#        - name: ServiceProvider
#          file: ./abis/ServiceProvider.json
#      eventHandlers:
#        - event: StakedServiceProviderBond(indexed address,indexed address,indexed uint256,uint256)
#          handler: handleServiceProviderStakedBond
#        - event: AddDelegatedStake(indexed address,indexed uint256,uint256)
#          handler: handleStakeDelegatedToServiceProvider
#        - event: WithdrawDelegatedStakeRequested(indexed address,indexed uint256,uint256)
#          handler: handleDelegatedStakeWithdrawalRequested
#        - event: WithdrewDelegatedStake(indexed address,indexed uint256,uint256)
#          handler: handleDelegatedStakeWithdrawn
#      file: ./src/service-provider-mapping.ts
  - kind: ethereum/contract
    name: ServiceProvider
    network: rinkeby
    source:
      address: '0x9a33adfeb3e5e480b040a80e90719f0efaadb7d9'
      abi: StakingRewards
      startBlock: 8819361
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      file: ./src/staking-rewards-mapping.ts
      entities:
        - Directory
      abis:
        - name: StakingRewards
          file: ./abis/StakingRewards.json
      eventHandlers:
        - event: ServiceProviderWhitelisted(indexed address,indexed address)
          handler: handleNewServiceProviderWhitelisted
        - event: MinServiceProviderFeeUpdated(uint256,uint256)
          handler: handleMinServiceProviderFeeUpdated
        - event: MinRequiredStakingAmountForServiceProvidersUpdated(uint256,uint256)
          handler: handleMinRequiredStakingAmountForServiceProvidersUpdated
templates:
  - name: ServiceProvider
    kind: ethereum/contract
    network: rinkeby
    source:
      abi: ServiceProvider
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      file: ./src/service-provider-mapping.ts
      entities:
        - AddDelegatedStake
        - StakedServiceProviderBond
        - WithdrawDelegatedStakeRequested
        - WithdrewDelegatedStake
      abis:
        - name: ServiceProvider
          file: ./abis/ServiceProvider.json
      eventHandlers:
        - event: StakedServiceProviderBond(indexed address,indexed address,indexed uint256,uint256)
          handler: handleServiceProviderStakedBond
        - event: AddDelegatedStake(indexed address,indexed uint256,uint256)
          handler: handleStakeDelegatedToServiceProvider
        - event: WithdrawDelegatedStakeRequested(indexed address,indexed uint256,uint256)
          handler: handleDelegatedStakeWithdrawalRequested
        - event: WithdrewDelegatedStake(indexed address,indexed uint256,uint256)
          handler: handleDelegatedStakeWithdrawn
        - event: IncreasedServiceProviderBond(indexed address,indexed uint256,uint256,uint256)
          handler: handleIncreasedServiceProviderBond
        - event: DecreasedServiceProviderBond(indexed address,indexed uint256,uint256,uint256)
          handler: handleDecreasedServiceProviderBond
        - event: WithdrewServiceProviderStake(indexed address,indexed uint256,uint256)
          handler: handleWithdrewServiceProviderStake
        - event: ExitedServiceProviderBond(indexed address,indexed uint256)
          handler: handleExitedServiceProviderBond
